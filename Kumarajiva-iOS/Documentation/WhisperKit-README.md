# WhisperKit 语音识别集成说明

本文档介绍了在 Kumarajiva iOS 应用中集成 WhisperKit 语音识别功能的相关信息。

## 功能概述

WhisperKit 为应用程序提供了高精度的语音识别功能，相比于 iOS 原生语音识别，具有以下优势：

- 更高的识别准确率，特别是对英语单词和短语
- 完全离线运行，无需网络连接
- 支持多种规模的模型，可根据设备性能和需求选择

## 使用方法

### 在设置中启用 WhisperKit

1. 打开应用程序，进入"我的"选项卡
2. 在设置部分，找到"语音识别设置"
3. 将"语音识别服务"切换为"WhisperKit语音识别"
4. 选择合适的模型大小（建议在性能较好的设备上使用 Small 或 Medium 模型）

### 首次使用说明

- 首次使用 WhisperKit 时需要下载模型文件，请确保网络连接良好
- 下载过程中会显示进度提示
- 模型文件下载完成后会保存在设备上，以后使用无需再次下载

### 模型选择建议

- **Tiny 模型**：75MB，适用于较低端设备，识别准确率一般，速度最快
- **Base 模型**：142MB，适用于大多数设备，准确率和速度较为平衡
- **Small 模型**：476MB，推荐选择，准确率和速度良好平衡
- **Medium 模型**：1.5GB，准确率高，但处理速度较慢，需要较高性能设备
- **Large 模型**：3GB，准确率最高，但处理速度最慢，仅推荐高性能设备使用

## 技术说明

此集成实现了以下功能：

1. 支持在原生语音识别和 WhisperKit 之间无缝切换
2. 自动下载和管理选择的模型
3. 使用相同的评分和高亮显示逻辑，保持一致的用户体验
4. 根据用户设置选择的模型大小，平衡精度和性能

## 注意事项

- WhisperKit 模型较大，首次下载可能需要一定时间
- 使用较大模型（如 Medium 和 Large）可能会增加应用内存占用
- 在较旧或性能较低的设备上，建议使用较小的模型以获得流畅的体验

## 常见问题

**Q: 模型下载失败怎么办？**  
A: 请检查网络连接，然后重新尝试。如果问题持续，可以尝试切换到原生语音识别。

**Q: 语音识别准确率不理想？**  
A: 尝试使用更大的模型，或确保录音环境较为安静。也可以调整麦克风距离和说话速度。

**Q: 应用占用空间大幅增加？**  
A: WhisperKit 模型会占用一定存储空间。如果存储空间有限，可以选择较小的模型。 